# vi:syntax=yaml

processes:
    - name: dart-backup
      environment: production

      supervisor: |
          command = /netops/bin/dart-backup-export-wrapper /srv/backups/dart
          user = www
          autostart = false
          autorestart = false
          startsecs = 0
          stdout_logfile = /data/logs/supervisor/dart-backup.log
          stdout_logfile_maxbytes = 10MB
          stdout_logfile_backups = 4
          stdout_events_enabled = true
          stderr_logfile = /data/logs/supervisor/dart-backup.err
          stderr_logfile_maxbytes = 10MB
          stderr_logfile_backups = 4
          stderr_events_enabled = true

      schedule: "0 * * * *"

      monitoring:
          state:
              severity: 3
          logs:
              stdout:
                  - regex: .*ERROR.*
                    severity: 4
              stderr:
                  - regex: .*
                    severity: 4
