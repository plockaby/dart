{% extends "master.html" %}

{% block title %}
    Dart Host - {{ fqdn }}
{% endblock %}

{% block header %}
    <link rel="stylesheet" href="{{ url_for('main.static', filename='third-party/bootstrap-table/1.11.1/bootstrap-table.min.css') }}">
{% endblock %}

{% block content %}
    <div class="col-xs-12">
        <h1>{{ fqdn }}</h1>

        {% if error %}
            <div class="alert alert-danger" role="alert">{{ error }}</div>
        {% else %}
            <ul id="tabs" class="nav nav-tabs">
                <li role="details" class="active"><a href="#details">Host Details</a></li>
                <li role="details"><a href="#active">Active (<span id="active-count">...</span>)</a></li>
                <li role="details"><a href="#pending">Pending (<span id="pending-count">...</span>)</a></li>
                <li role="details"><a href="#assigned">Assigned (<span id="assigned-count">...</span>)</a></li>
            </ul>

            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="details">
                    <div class="container">
                        {% include "host/details.html" %}
                    </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="active">
                    {% include "host/active.html" %}
                </div>
                <div role="tabpanel" class="tab-pane" id="pending">
                    {% include "host/pending.html" %}
                </div>
                <div role="tabpanel" class="tab-pane" id="assigned">
                    {% include "host/assigned.html" %}
                </div>
            </div>
        {% endif %}
    </div>
{% endblock %}

{% block footer %}
    <!-- include moment like this so that it works with flask -->
    {{ moment.include_moment(local_js=url_for('main.static', filename='third-party/moment.js/2.18.1/moment-with-locales.min.js')) }}
    <script type="text/javascript" src="{{ url_for('main.static', filename='third-party/bootstrap-table/1.11.1/bootstrap-table.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('main.static', filename='third-party/bootstrap-3-typeahead/4.0.2/bootstrap3-typeahead.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('main.static', filename='common.js') }}"></script>
    <script type="text/javascript">
        // wrap host names in links to the page for the process
        dart.format_process = function (data, row) {
            var url = "{{ url_for('main.process', process='###process###') }}";
            return "<div class='text-nowrap'><a href='" + url.replace('%23%23%23process%23%23%23', row.process) + "'>" + data + "</a></div>";
        };

        dart.fqdn = "{{ fqdn }}";
        dart.endpoints = {
            update: "{{ url_for('api.commands.update') }}",
            add: "{{ url_for('api.commands.add') }}",
            remove: "{{ url_for('api.commands.remove') }}",
            start: "{{ url_for('api.commands.start') }}",
            stop: "{{ url_for('api.commands.stop') }}",
            restart: "{{ url_for('api.commands.restart') }}",
            enable: "{{ url_for('api.actions.enable') }}",
            disable: "{{ url_for('api.actions.disable') }}",
            assign: "{{ url_for('api.actions.assign') }}",
            unassign: "{{ url_for('api.actions.unassign') }}",
            autocomplete: {
                process: "{{ url_for('main.autocomplete_process') }}",
                environment: "{{ url_for('main.autocomplete_environment') }}",
                fqdn: "{{ url_for('main.autocomplete_fqdn') }}"
            }
        };
        dart.ignore = {{ ignore|tojson }};
    </script>
{% endblock %}
